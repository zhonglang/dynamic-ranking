<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动态排行榜生成器</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="main-container">
        <!-- 左侧配置区域 -->
        <div class="config-panel">
            <h1>动态排行榜生成器</h1>

            <!-- 可滚动主体区域：把输入与设置放入这里，以避免面板超高 -->
            <div class="config-body">
            <!-- 数据输入区域 -->
            <div class="input-section">
                <div class="tabs">
                    <button class="tab-button active" data-tab="text">文本输入</button>
                    <button class="tab-button" data-tab="file">文件上传</button>
                </div>

                <!-- 文本输入标签页 -->
                <div class="tab-content active" id="text-tab">
                    <label for="data-input" style="display:block;margin-bottom:8px;color:#4a5568;font-weight:600;">数据（JSON格式）：</label>
                    <textarea id="data-input" rows="12">[
  {"name": "白羊座", "value": 856},
  {"name": "金牛座", "value": 942},
  {"name": "双子座", "value": 723},
  {"name": "巨蟹座", "value": 1089},
  {"name": "狮子座", "value": 1156},
  {"name": "处女座", "value": 678},
  {"name": "天秤座", "value": 934},
  {"name": "天蝎座", "value": 1212},
  {"name": "射手座", "value": 789},
  {"name": "摩羯座", "value": 1100},
  {"name": "水瓶座", "value": 867},
  {"name": "双鱼座", "value": 945}
]</textarea>
                </div>

                <!-- 文件上传标签页 -->
                <div class="tab-content" id="file-tab">
                    <div class="file-upload">
                        <input type="file" id="file-input" accept=".json,.txt">
                        <label for="file-input" class="file-label">
                            <span>点击或拖拽文件到此处</span>
                            <small>支持 JSON 和 TXT 格式</small>
                        </label>
                    </div>
                    <div id="file-info" class="file-info"></div>
                </div>
            </div>

            <!-- 设置区域 -->
            <!-- 配置区域：分为左右 Tab 布局 -->
            <div class="settings-container">
                <!-- 顶部 Tab 导航 -->
                <div class="settings-tabs">
                    <button class="tab-item active" data-tab="title-settings">
                        <span class="tab-icon">📝</span>
                        <span class="tab-text">标题设置</span>
                    </button>
                    <button class="tab-item" data-tab="bg-settings">
                        <span class="tab-icon">🖼️</span>
                        <span class="tab-text">背景设置</span>
                    </button>
                    <button class="tab-item" data-tab="anim-settings">
                        <span class="tab-icon">🎬</span>
                        <span class="tab-text">动画设置</span>
                    </button>
                    <button class="tab-item" data-tab="fx-settings">
                        <span class="tab-icon">✨</span>
                        <span class="tab-text">特效设置</span>
                    </button>
                    <button class="tab-item" data-tab="value-settings">
                        <span class="tab-icon">🔢</span>
                        <span class="tab-text">数值显示</span>
                    </button>
                </div>

                <!-- 配置内容 -->
                <div class="settings-content">
                    <!-- 1. 标题设置 -->
                    <div class="tab-pane active" id="title-settings">
                        <div class="settings-header">标题设置</div>
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label for="title-input">排行榜标题</label>
                                <input type="text" id="title-input" placeholder="输入排行榜标题" value="十二星座动态排行榜">
                            </div>
                            <div class="setting-item">
                                <label for="title-size-input">标题大小</label>
                                <div class="range-with-value">
                                    <input type="range" id="title-size-input" min="12" max="64" value="24">
                                    <span id="title-size-value">24px</span>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label for="title-color-input">标题颜色</label>
                                <input type="color" id="title-color-input" value="#ffffff">
                            </div>
                        </div>
                    </div>

                    <!-- 2. 背景设置 -->
                    <div class="tab-pane" id="bg-settings">
                        <div class="settings-header">背景设置</div>
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label for="bg-image-input">背景图</label>
                                <div class="file-with-clear">
                                    <input type="file" id="bg-image-input" accept="image/*">
                                    <button id="clear-bg-image" class="clear-btn" title="清除背景图">✕</button>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label for="bg-opacity">背景透明度</label>
                                <div class="range-with-value">
                                    <input type="range" id="bg-opacity" min="0" max="1" step="0.01" value="1">
                                    <span id="bg-opacity-value">1.00</span>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label for="background-theme">主题颜色</label>
                                <select id="background-theme">
                                    <option value="none">无主题</option>
                                    <option value="dark">深色科技</option>
                                    <option value="blue" selected>科技蓝</option>
                                    <option value="purple">科技紫</option>
                                    <option value="green">科技绿</option>
                                    <option value="red">科技红</option>
                                    <option value="cyber">赛博朋克</option>
                                    <option value="space">太空深蓝</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 3. 动画设置 -->
                    <div class="tab-pane" id="anim-settings">
                        <div class="settings-header">动画设置</div>
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label for="animation-type">动画类型</label>
                                <select id="animation-type">
                                    <option value="squeeze">🎯 挤压式</option>
                                    <option value="fade">💫 淡入式</option>
                                    <option value="slide">🚀 横向滑入式</option>
                                    <option value="scale">🎪 缩放弹跳式</option>
                                    <option value="flip">🃏 翻转卡片式</option>
                                    <option value="elevator">🛗 升降机式</option>
                                    <option value="fly-down">🦅 上方飞入式</option>
                                    <option value="glitch">🧬 故障闪烁</option>
                                    <option value="scan">📡 扫描光束</option>
                                    <option value="wave">🌊 波动入场</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label for="animation-duration">间隔时间 (秒)</label>
                                <input type="number" id="animation-duration" value="0.5" min="0.1" max="2" step="0.1">
                            </div>
                        </div>
                    </div>

                    <!-- 4. 特效设置 -->
                    <div class="tab-pane" id="fx-settings">
                        <div class="settings-header">特效设置</div>
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label>烟花特效</label>
                                <div class="radio-group">
                                    <label><input type="radio" name="fireworks-enable" value="on" checked> 开启</label>
                                    <label><input type="radio" name="fireworks-enable" value="off"> 关闭</label>
                                </div>
                            </div>
                            <div id="fireworks-config-container">
                                <div class="setting-item">
                                    <label for="fireworks-trigger-rank">触发名次</label>
                                    <select id="fireworks-trigger-rank">
                                        <option value="3" selected>第3名</option>
                                    </select>
                                </div>
                                <div class="setting-item">
                                    <label for="fireworks-density">烟花密度</label>
                                    <div class="range-with-value">
                                        <input type="range" id="fireworks-density" min="1" max="10" value="5">
                                        <span id="fireworks-density-display">5</span>
                                    </div>
                                </div>
                                <div class="setting-item">
                                    <label for="fireworks-shape">烟花图案</label>
                                    <select id="fireworks-shape">
                                        <option value="random">随机图案</option>
                                        <option value="circle">经典圆形</option>
                                        <option value="heart">浪漫心形</option>
                                        <option value="star">璀璨星形</option>
                                        <option value="burst">爆炸散射</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 5. 数值显示 -->
                    <div class="tab-pane" id="value-settings">
                        <div class="settings-header">数值显示</div>
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label>显示位置</label>
                                <div class="radio-group">
                                    <label><input type="radio" name="value-position" value="inside-bar" checked> 条形内</label>
                                    <label><input type="radio" name="value-position" value="outside-bar"> 条形外</label>
                                </div>
                            </div>
                            <div class="setting-item" id="value-offset-container" style="display: none;">
                                <label for="value-offset">外置偏移</label>
                                <div class="range-with-value">
                                    <input type="range" id="value-offset" min="0" max="100" value="10">
                                    <span id="value-offset-display">10px</span>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label for="value-color-input">数值颜色</label>
                                <input type="color" id="value-color-input" value="#ffffff">
                            </div>
                        </div>
                    </div>
                </div> <!-- /.settings-content -->
            </div> <!-- /.settings-container -->

            <!-- 控制按钮：作为 config-panel 的独立一行，保证始终可见 -->
            <div class="panel-controls">
                <div class="controls">
                    <button id="run-animation" class="primary-button">运行动画</button>
                    <button id="preview-animation" class="primary-button preview-btn">预览动画</button>
                    <button id="download-video" class="secondary-button" disabled>下载视频</button>
                </div>
            </div>

            <!-- 录制状态提示 -->
            <div id="recording-status" class="recording-status" style="display: none;">
                <span class="recording-dot"></span>
                正在录制视频...
            </div>
            </div> <!-- /.config-body -->

         </div>

         <!-- 右侧展示区域 -->
        <div class="preview-panel">
            <!-- 排行榜展示区域 -->
            <div class="ranking-container" id="ranking-container">
                <!-- 背景图 DOM 预览（仅用于页面预览），由 JS 控制显示/隐藏与透明度 -->
                <img id="ranking-bg-image" src="" alt="背景图" style="position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:none; z-index:0; pointer-events:none;" />
                <canvas id="ranking-canvas"></canvas>
                <!-- DOM 版本用于显示（Canvas用于录制） -->
                <div id="ranking-title" class="ranking-title" style="position: absolute; top: 30px; left: 0; right: 0; text-align: center;"></div>
                <div id="ranking-content" style="position: absolute; top: 120px; left: 20px; right: 20px; bottom: 20px;">
                    <div class="empty-state">
                        <p>点击"运行动画"开始演示</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
